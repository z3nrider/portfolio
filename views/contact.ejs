<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/headMeta') %>
    <title>Contact</title>
</head>
<body>
    <%- include('partials/header') %>
    <div id="error_message">

    </div>
    <div class="container mt-4">
      <div class="card w-50 border-info mb-3 contactCard">
        <div class="card-header">Leave your information below</div>
        <div class="card-body text-info">
          <h5 class="card-title">Hire me / Ask me</h5>
          <p class="card-text">

            <form id="contactForm" onsubmit="return validate()" action="/contact" method="POST">
              <div class="form-goup"></div>
              <label for="name">Name</label>
              <input name="name" type="text" id="name" class="form-control">

              <label for="subject">Subject</label>
              <input name="subject" type="text" id="subject" class="form-control">

              <label for="email">Email</label>
              <input name="email" type="email" id="email" class="form-control">

              <div class="form-group">
                <label for="comment">Comment</label>
                <textarea name="comment" id="comment" rows="3" class="form-control"></textarea>
              </div>

              <div class="form-goup">
                <input name="_formsubmit_id" type="text" style="display:none">
                <input value="Submit" type="submit" class="btn btn-outline-dark btn-sm text-white">
              </div>

            </form>
            <div id="div1">

            </div>
            <script>
              const form = document.getElementById('contactForm');

              form.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent default form submission

                function validate() {
                  let name =
                    document.getElementById("name").value;
                  let subject =
                    document.getElementById("subject").value;
                  let email =
                    document.getElementById("email").value;
                  let message =
                    document.getElementById("comment").value;
                  let error_message =
                    document.getElementById("error_message");

                  error_message.style.padding = "10px";

                  let errors = [];

                  if (name.length < 5) {
                    errors.push("Please Enter a valid Name");}
                  if (subject.length < 3) {
                    errors.push("Please Enter a Correct Subject");}
                  if (email.indexOf("@") == -1 || email.length < 6) {
                    errors.push(
                      "Please Enter a valid Email");}
                  if (message.length <= 3) {
                    errors.push(
                      "Please Enter More Than 3 Characters");}

                  if (errors.length > 0) {
                    error_message.innerHTML =
                      errors.join("<br>");
                    return false;}
                  else {
                    return true;}}

                // If validation passes, submit the form
                if (validate()) {
                  alert('Thank you.')
                  form.submit();
                }
              });
            </script>
          </p>
        </div>
      </div>

    </div>


    <script src="/public/js/mail.js"></script>
</body>
<footer>
  <%- include('partials/footer') %>
</footer>
</html>